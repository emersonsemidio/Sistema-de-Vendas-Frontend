<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <!-- Informações do cliente -->
    <div *ngIf="cliente" class="cliente-info">
      <h3>Cliente: {{ cliente.nome }} (ID: {{ cliente.id }})</h3>
    </div>

    <h2>Comprar Produto</h2>

    <div *ngIf="produto" class="produto-info">
      <p><strong>Produto:</strong> {{ produto.nome }}</p>
      <p><strong>Preço unitário:</strong> R$ {{ produto.preco | number:'1.2-2' }}</p>
      <p><strong>Estoque disponível:</strong> {{ maxQuantidade }} unidades</p>
    </div>

    <div class="quantidade-section">
      <label>Quantidade:</label>
      <div class="quantidade-controls">
        <button (click)="diminuirQuantidade()">-</button>
        <input
          type="number"
          [(ngModel)]="quantidade"
          (change)="validarQuantidade()"
          min="1"
          [max]="maxQuantidade"
          class="quantidade-input"
        >
        <button (click)="aumentarQuantidade()">+</button>
      </div>
    </div>

    <div class="total-section">
      <p><strong>Total:</strong> R$ {{ calcularTotal() | number:'1.2-2' }}</p>
    </div>

    <!-- Mensagem de feedback -->
    <div *ngIf="mensagem" class="mensagem" [class.sucesso]="sucesso" [class.erro]="!sucesso">
      {{ mensagem }}
    </div>

    <div class="modal-buttons">
      <button class="btn-cancelar" (click)="fecharModal()" [disabled]="loading">
        Cancelar
      </button>
      <button class="btn-confirmar" (click)="confirmarCompra()" [disabled]="loading">
        {{ loading ? 'Processando...' : 'Confirmar Compra' }}
      </button>
    </div>
  </div>
</div>

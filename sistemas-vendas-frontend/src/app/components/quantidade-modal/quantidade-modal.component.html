<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-container">

    <!-- Cabeçalho -->
    <div class="modal-header">
      <h2>Comprar Produto</h2>
    </div>

    <!-- Informações do Produto -->
    <div *ngIf="produto" class="produto-info">
      <p class="produto-nome">{{ produto.nome }}</p>
      <p class="preco-unitario">Preço unitário: <strong>R$ {{ produto.preco | number:'1.2-2' }}</strong></p>
    </div>

    <!-- Controle de Quantidade -->
    <div class="quantidade-section">
      <label>Quantidade:</label>
      <div class="quantidade-controls">
        <button class="btn-quantidade" (click)="diminuirQuantidade()">-</button>
        <input
          type="number"
          [(ngModel)]="quantidade"
          (change)="validarQuantidade()"
          min="1"
          [max]="maxQuantidade"
          class="quantidade-input"
        >
        <button class="btn-quantidade" (click)="aumentarQuantidade()">+</button>
      </div>
    </div>

    <!-- Total -->
    <div class="total-section">
      <div class="total-line"></div>
      <p class="total-text">Total: <strong>R$ {{ calcularTotal() | number:'1.2-2' }}</strong></p>
    </div>

    <!-- Mensagem de Feedback -->
    <div *ngIf="mensagem" class="mensagem-feedback" [class.sucesso]="sucesso" [class.erro]="!sucesso">
      {{ mensagem }}
    </div>

    <!-- Botões de Ação -->
    <div class="modal-buttons">
      <button class="btn-cancelar" (click)="fecharModal()" [disabled]="loading">
        Cancelar
      </button>
      <button class="btn-confirmar" (click)="confirmarCompra()" [disabled]="loading">
        {{ loading ? 'Processando...' : 'Adicionar ao Carrinho' }}
      </button>
    </div>

  </div>
</div>
